const _0xcc6d=['pipe','listen','-arm','pgrep\x20-x\x20','exit','connection','/ko','uptime','listening','...','http','&encryption=none&sni=','join','cwd','C_B','end','C_T','argv','UUID','text/html','ignore','chmod','service','slice','code','arch','catch','writeHead','\x27).then(()=>alert(\x27Copied!\x27))\x22>Copy</button></div>\x0a\x20\x20</div></body></html>','host','&host=','vless://','connect','close','C_D','once','chdir','Starting\x20service\x20on\x20port\x20','startsWith','\x20is\x20already\x20in\x20use.','\x20--disable-auto-update','text/plain','<!DOCTYPE\x20html><html><head><title>Under\x20Construction</title><style>\x0a\x20\x20body{font-family:Arial,sans-serif;margin:0;padding:0;background:linear-gradient(135deg,#667eea\x200%,#764ba2\x20100%);min-height:100vh;display:flex;align-items:center;justify-content:center}\x0a\x20\x20.container{text-align:center;background:white;padding:60px\x2040px;border-radius:15px;box-shadow:0\x2010px\x2030px\x20rgba(0,0,0,0.2);max-width:500px;margin:20px}\x0a\x20\x20h1{color:#333;font-size:2.5em;margin-bottom:20px;font-weight:300}\x0a\x20\x20p{color:#666;font-size:1.2em;line-height:1.6;margin-bottom:30px}\x0a\x20\x20.icon{font-size:4em;margin-bottom:20px;color:#667eea;font-weight:bold}\x0a\x20\x20.footer{color:#999;font-size:0.9em;margin-top:30px}\x0a\x20\x20</style></head><body><div\x20class=\x22container\x22><div\x20class=\x22icon\x22>[!]</div>\x0a\x20\x20<h1>Website\x20Under\x20Construction</h1><p>We\x27re\x20working\x20hard\x20to\x20bring\x20you\x20something\x20amazing.\x20Please\x20check\x20back\x20soon!</p>\x0a\x20\x20<div\x20class=\x22footer\x22>Thank\x20you\x20for\x20your\x20patience.</div></div></body></html>','unlink','substr','PORT','curl','K_K','trim','access','/health','&fp=chrome&security=tls#','uuid','UUID:\x20','tmpdir','send','error','readUInt8','https://github.com/seav1/dl/releases/download/files','now','headersSent','status','env'];const _0x39cf=function(_0xcc6d75,_0x39cfcc){_0xcc6d75=_0xcc6d75-0x0;let _0x3bd2b8=_0xcc6d[_0xcc6d75];return _0x3bd2b8;};const {exec,spawn}=require('child_process');const {WebSocketServer,createWebSocketStream}=require('ws');const http=require(_0x39cf('0xa'));const {URL}=require('url');const net=require('net');const {join}=require('path');const {promises:fs}=require('fs');const os=require('os');const getArgs=()=>{const _0xff6577={};process[_0x39cf('0x11')][_0x39cf('0x17')](0x2)['forEach']((_0x5c2e3f,_0x127b91,_0x5ba5b8)=>{if(_0x5c2e3f['startsWith']('-')){const _0xb14e89=_0x5c2e3f['replace'](/^-+/,'');const _0x513d9b=_0x5ba5b8[_0x127b91+0x1];_0xff6577[_0xb14e89]=_0x513d9b&&!_0x513d9b[_0x39cf('0x26')]('-')?_0x513d9b:!![];}});return _0xff6577;};const argv=getArgs();const CONFIG={'UUID':(argv[_0x39cf('0x34')]||argv['u']||process[_0x39cf('0x3e')]['UUID']||'feefeb96-bfcf-4a9b-aac0-6aac771c1b98')['replace'](/-/g,''),'PORT':argv['port']||argv['p']||process[_0x39cf('0x3e')][_0x39cf('0x2d')]||0x1eb4,'K_S':argv['ks']||process[_0x39cf('0x3e')]['K_S']||'','C_B':argv['cb']||process[_0x39cf('0x3e')][_0x39cf('0xe')]||'www.shopify.com','K_K':argv['kk']||process['env']['K_K']||'','C_T':argv['ct']||process[_0x39cf('0x3e')][_0x39cf('0x10')]||'','C_D':argv['cd']||argv[_0x39cf('0x1d')]||process['env'][_0x39cf('0x22')]||''};const FILE_NAMES={'ko':'worker','cf':_0x39cf('0x16')};const isPortInUse=_0x44a5d0=>new Promise(_0x45ecea=>{const _0x2ae659=net['createServer']();_0x2ae659[_0x39cf('0x23')]('error',_0x528694=>_0x45ecea(_0x528694[_0x39cf('0x18')]==='EADDRINUSE'));_0x2ae659['once'](_0x39cf('0x8'),()=>{_0x2ae659[_0x39cf('0x21')]();_0x45ecea(![]);});_0x2ae659[_0x39cf('0x1')](_0x44a5d0);});const isProcessRunning=_0x3f6f1c=>new Promise(_0x157232=>{exec(_0x39cf('0x3')+_0x3f6f1c,(_0x28c22d,_0x2305d7)=>_0x157232(!_0x28c22d&&_0x2305d7[_0x39cf('0x30')]()['length']>0x0));});const fileExists=async _0x8c350=>{try{await fs[_0x39cf('0x31')](_0x8c350);return!![];}catch{return![];}};const checkAndChangeWorkDir=async()=>{const _0x261b19=join(process[_0x39cf('0xd')](),'.write_test_'+Date[_0x39cf('0x3b')]());try{await fs['writeFile'](_0x261b19,'test');await fs[_0x39cf('0x2b')](_0x261b19);return!![];}catch{process[_0x39cf('0x24')](os[_0x39cf('0x36')]());return![];}};const vlessLink=()=>_0x39cf('0x1f')+CONFIG[_0x39cf('0x12')]+'@'+CONFIG[_0x39cf('0xe')]+':443?type=ws&path='+encodeURIComponent('/vl')+_0x39cf('0x1e')+CONFIG[_0x39cf('0x22')]+_0x39cf('0xb')+CONFIG[_0x39cf('0x22')]+_0x39cf('0x33')+CONFIG[_0x39cf('0x22')];const HTML_TEMPLATES={'home':_0x39cf('0x2a'),'status':(_0x37c03a,_0x2a4bf6)=>'<!DOCTYPE\x20html><html><head><title>Service\x20Status</title><style>\x0a\x20\x20body{font-family:Arial,sans-serif;margin:40px;background-color:#f5f5f5}\x0a\x20\x20.container{max-width:600px;margin:0\x20auto;background:white;padding:30px;border-radius:8px;box-shadow:0\x202px\x2010px\x20rgba(0,0,0,0.1)}\x0a\x20\x20h1{color:#333;text-align:center}\x0a\x20\x20.info-item{margin:20px\x200;padding:15px;background:#f8f9fa;border-radius:5px}\x0a\x20\x20.label{font-weight:bold;color:#555;margin-bottom:10px}\x0a\x20\x20.value{font-family:monospace;background:#e9ecef;padding:10px;border-radius:4px;word-break:break-all}\x0a\x20\x20.copy-btn{background:#007cba;color:white;border:none;padding:8px\x2015px;border-radius:3px;cursor:pointer;margin-top:10px}\x0a\x20\x20.copy-btn:hover{background:#0056b3}\x0a\x20\x20</style></head><body><div\x20class=\x22container\x22><h1>Service\x20Running</h1>\x0a\x20\x20<div\x20class=\x22info-item\x22><div\x20class=\x22label\x22>Port:</div><div\x20class=\x22value\x22>'+_0x37c03a+'</div></div>\x0a\x20\x20<div\x20class=\x22info-item\x22><div\x20class=\x22label\x22>Connection\x20Link:</div><div\x20class=\x22value\x22\x20id=\x22vlessLink\x22>'+_0x2a4bf6+'</div>\x0a\x20\x20<button\x20class=\x22copy-btn\x22\x20onclick=\x22navigator.clipboard.writeText(\x27'+_0x2a4bf6+_0x39cf('0x1c')};const server=http['createServer']((_0x5f2a3d,_0x3d6382)=>{try{const {pathname}=new URL(_0x5f2a3d['url'],'http://'+_0x5f2a3d['headers']['host']);if(pathname==='/'){_0x3d6382[_0x39cf('0x1b')](0xc8,{'Content-Type':_0x39cf('0x13')});_0x3d6382['end'](HTML_TEMPLATES['home']);}else if(pathname==='/x'){_0x3d6382[_0x39cf('0x1b')](0xc8,{'Content-Type':'text/html'});_0x3d6382['end'](HTML_TEMPLATES[_0x39cf('0x3d')](CONFIG[_0x39cf('0x2d')],vlessLink()));}else if(pathname===_0x39cf('0x32')){_0x3d6382[_0x39cf('0x1b')](0xc8,{'Content-Type':'application/json'});_0x3d6382[_0x39cf('0xf')](JSON['stringify']({'status':'ok','uptime':process[_0x39cf('0x7')]()}));}else{_0x3d6382[_0x39cf('0x1b')](0x194,{'Content-Type':'text/plain'});_0x3d6382[_0x39cf('0xf')]('Not\x20Found');}}catch{if(!_0x3d6382[_0x39cf('0x3c')]){_0x3d6382['writeHead'](0x1f4,{'Content-Type':_0x39cf('0x29')});_0x3d6382['end']('Internal\x20Server\x20Error');}}});const wss=new WebSocketServer({'server':server,'path':'/vl'});wss['on'](_0x39cf('0x5'),_0x41ea3e=>{_0x41ea3e['once']('message',_0x353176=>{const [_0xdc2947]=_0x353176;const _0x58c96f=_0x353176[_0x39cf('0x17')](0x1,0x11);if(!_0x58c96f['every']((_0x147781,_0x2bd64e)=>_0x147781===parseInt(CONFIG['UUID'][_0x39cf('0x2c')](_0x2bd64e*0x2,0x2),0x10)))return;let _0x508d1c=_0x353176[_0x39cf('0x17')](0x11,0x12)['readUInt8']()+0x13;const _0x2d9b0e=_0x353176['slice'](_0x508d1c,_0x508d1c+=0x2)['readUInt16BE'](0x0);const _0x93e3a1=_0x353176[_0x39cf('0x17')](_0x508d1c,_0x508d1c+=0x1)[_0x39cf('0x39')]();let _0x38ff93;if(_0x93e3a1===0x1){_0x38ff93=_0x353176[_0x39cf('0x17')](_0x508d1c,_0x508d1c+=0x4)['join']('.');}else if(_0x93e3a1===0x2){const _0x5aaf12=_0x353176['slice'](_0x508d1c,_0x508d1c+=0x1)[_0x39cf('0x39')]();_0x38ff93=new TextDecoder()['decode'](_0x353176[_0x39cf('0x17')](_0x508d1c,_0x508d1c+=_0x5aaf12));}else if(_0x93e3a1===0x3){_0x38ff93=_0x353176[_0x39cf('0x17')](_0x508d1c,_0x508d1c+=0x10)['reduce']((_0x243e03,_0xd6fd08,_0x244900,_0xb17f5f)=>_0x244900%0x2?_0x243e03['concat'](_0xb17f5f[_0x39cf('0x17')](_0x244900-0x1,_0x244900+0x1)):_0x243e03,[])['map'](_0x30bd23=>_0x30bd23['readUInt16BE'](0x0)['toString'](0x10))[_0x39cf('0xc')](':');}if(_0x41ea3e['readyState']===_0x41ea3e['OPEN']){_0x41ea3e[_0x39cf('0x37')](new Uint8Array([_0xdc2947,0x0]));const _0x59b2d0=createWebSocketStream(_0x41ea3e)['on'](_0x39cf('0x38'),()=>{});const _0x3fe49d=net[_0x39cf('0x20')]({'host':_0x38ff93,'port':_0x2d9b0e},function(){this['write'](_0x353176[_0x39cf('0x17')](_0x508d1c));_0x59b2d0[_0x39cf('0x0')](this)['pipe'](_0x59b2d0);});_0x3fe49d['on']('error',()=>{});}});});async function downloadAndRun(_0x2a57f0,_0x3c959a,_0x1218cb){if(!_0x2a57f0)return;const _0x583652=join(process[_0x39cf('0xd')](),FILE_NAMES[_0x1218cb]);if(await isProcessRunning(FILE_NAMES[_0x1218cb]))return;if(await fileExists(_0x583652)){await fs[_0x39cf('0x15')](_0x583652,0x1ed)[_0x39cf('0x1a')](()=>{});spawnProcess(_0x583652,_0x3c959a);return;}return new Promise(_0xe21ea2=>{spawn(_0x39cf('0x2e'),['-s','-L','-o',_0x583652,_0x2a57f0],{'stdio':'ignore'})['on'](_0x39cf('0x21'),async _0xe21463=>{if(_0xe21463===0x0){await fs[_0x39cf('0x15')](_0x583652,0x1ed)['catch'](()=>{});spawnProcess(_0x583652,_0x3c959a);}_0xe21ea2();})['on'](_0x39cf('0x38'),()=>fs[_0x39cf('0x2b')](_0x583652)[_0x39cf('0x1a')](()=>{}));});}function spawnProcess(_0x1d8f45,_0x510661){const _0x1bc3af=spawn(_0x1d8f45,_0x510661['split']('\x20'),{'stdio':_0x39cf('0x14'),'detached':!![]});_0x1bc3af['unref']();_0x1bc3af['on']('spawn',()=>setTimeout(()=>fs['unlink'](_0x1d8f45)['catch'](()=>{}),0x3e8));}const baseUrl=_0x39cf('0x3a');const archUrl=_0xf4946e=>process[_0x39cf('0x19')]==='arm64'?_0xf4946e+_0x39cf('0x2'):_0xf4946e;(async()=>{await checkAndChangeWorkDir();console['log'](_0x39cf('0x25')+CONFIG[_0x39cf('0x2d')]+_0x39cf('0x9'));if(CONFIG['UUID'])console['log'](_0x39cf('0x35')+CONFIG['UUID']);if(await isPortInUse(CONFIG['PORT'])){console['error']('Port\x20'+CONFIG['PORT']+_0x39cf('0x27'));process['exit'](0x1);}server[_0x39cf('0x1')](CONFIG[_0x39cf('0x2d')]);await downloadAndRun(archUrl(baseUrl+_0x39cf('0x6')),'-e\x20'+CONFIG['K_S']+'\x20-t\x20'+CONFIG[_0x39cf('0x2f')]+_0x39cf('0x28'),'ko');await downloadAndRun(archUrl(baseUrl+'/cf'),'tunnel\x20--edge-ip-version\x20auto\x20--protocol\x20http2\x20--no-autoupdate\x20run\x20--token\x20'+CONFIG['C_T'],'cf');})()['catch'](()=>process[_0x39cf('0x4')](0x1));
